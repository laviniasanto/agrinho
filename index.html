<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jogo Sustentabilidade</title>
<style>
  body {
    margin: 0; font-family: Arial, sans-serif;
    background: #e0f7fa;
    user-select: none;
    text-align: center;
  }
  h1 {
    margin: 20px 0;
    color: #00796b;
  }
  #jogo {
    margin: 0 auto;
    position: relative;
    width: 600px;
    height: 400px;
    border: 4px solid #004d40;
    border-radius: 15px;
    background: #a7ffeb;
    overflow: hidden;
  }
  #jogador {
    position: absolute;
    width: 40px;
    height: 40px;
    background: #2e7d32;
    border-radius: 50%;
    top: 180px;
    left: 280px;
    box-shadow: 0 0 8px #1b5e20;
  }
  .lixo {
    position: absolute;
    width: 30px;
    height: 30px;
    border-radius: 5px;
    top: 0;
  }
  .reciclavel {
    box-shadow: 0 0 5px 2px rgba(0,0,0,0.15);
  }
  .azul { background: #2196f3; }      /* papel */
  .amarelo { background: #ffeb3b; }   /* plastico */
  .verde { background: #4caf50; }     /* vidro */
  .cinza { background: #9e9e9e; }     /* lixo comum */
  #placar {
    margin: 15px;
    font-size: 22px;
    color: #004d40;
  }
  #msg {
    margin-top: 20px;
    font-size: 24px;
    color: #d32f2f;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Jogo Sustentabilidade: Coletar Lixo Recicl√°vel</h1>
<div id="jogo">
  <div id="jogador"></div>
</div>
<div id="placar">Recicl√°veis coletados: 0 | Pontos: 0</div>
<div id="msg"></div>

<script>
  const jogo = document.getElementById('jogo');
  const jogador = document.getElementById('jogador');
  const placar = document.getElementById('placar');
  const msg = document.getElementById('msg');

  const larguraJogo = jogo.clientWidth;
  const alturaJogo = jogo.clientHeight;

  let jogadorPos = { x: 280, y: 180 };
  const jogadorSize = 40;
  const passo = 20;

  let lixoCaindo = [];
  let reciclaveisColetados = 0;
  let pontos = 0;
  let jogoAtivo = true;

  // Cores de lixo e se √© recicl√°vel
  const tiposLixo = [
    {cor: 'azul', reciclavel: true},
    {cor: 'amarelo', reciclavel: true},
    {cor: 'verde', reciclavel: true},
    {cor: 'cinza', reciclavel: false}
  ];

  function criarLixo() {
    if (!jogoAtivo) return;

    const tipo = tiposLixo[Math.floor(Math.random() * tiposLixo.length)];

    const lixo = document.createElement('div');
    lixo.classList.add('lixo', tipo.cor);
    if (tipo.reciclavel) lixo.classList.add('reciclavel');
    lixo.style.left = Math.floor(Math.random() * (larguraJogo - 30)) + 'px';
    lixo.style.top = '0px';
    jogo.appendChild(lixo);

    lixoCaindo.push({elemento: lixo, y: 0, tipo: tipo});
  }

  function moverLixo() {
    if (!jogoAtivo) return;

    for(let i = lixoCaindo.length -1; i >= 0; i--) {
      const lixo = lixoCaindo[i];
      lixo.y += 3;  // velocidade de queda
      lixo.elemento.style.top = lixo.y + 'px';

      // Se lixo saiu do jogo, remove
      if (lixo.y > alturaJogo) {
        jogo.removeChild(lixo.elemento);
        lixoCaindo.splice(i,1);
      }
    }
  }

  function atualizarPosicaoJogador() {
    jogador.style.left = jogadorPos.x + 'px';
    jogador.style.top = jogadorPos.y + 'px';
  }

  function checarColisoes() {
    for(let i = lixoCaindo.length -1; i >= 0; i--) {
      const lixo = lixoCaindo[i];
      const lx = lixo.elemento.offsetLeft;
      const ly = lixo.y;

      if (
        jogadorPos.x < lx + 30 &&
        jogadorPos.x + jogadorSize > lx &&
        jogadorPos.y < ly + 30 &&
        jogadorPos.y + jogadorSize > ly
      ) {
        // coletou lixo
        if (lixo.tipo.reciclavel) {
          reciclaveisColetados++;
          pontos++;
          placar.textContent = `Recicl√°veis coletados: ${reciclaveisColetados} | Pontos: ${pontos}`;
        } else {
          pontos--;
          placar.textContent = `Recicl√°veis coletados: ${reciclaveisColetados} | Pontos: ${pontos}`;
        }
        jogo.removeChild(lixo.elemento);
        lixoCaindo.splice(i, 1);

        verificarFim();
      }
    }
  }

  function verificarFim() {
    if (reciclaveisColetados >= 10) {
      msg.textContent = "Parab√©ns! Voc√™ ajudou o planeta! üåçüíö";
      jogoAtivo = false;
    } else if (pontos <= -5) {
      msg.textContent = "Que pena! Muito lixo comum coletado. Tente de novo!";
      jogoAtivo = false;
    }
  }

  window.addEventListener('keydown', e => {
    if (!jogoAtivo) return;

    switch(e.key) {
      case 'ArrowUp':
        jogadorPos.y = Math.max(0, jogadorPos.y - passo);
        break;
      case 'ArrowDown':
        jogadorPos.y = Math.min(alturaJogo - jogadorSize, jogadorPos.y + passo);
        break;
      case 'ArrowLeft':
        jogadorPos.x = Math.max(0, jogadorPos.x - passo);
        break;
      case 'ArrowRight':
        jogadorPos.x = Math.min(larguraJogo - jogadorSize, jogadorPos.x + passo);
        break;
    }
    atualizarPosicaoJogador();
    checarColisoes();
  });

  atualizarPosicaoJogador();

  // Criar lixo a cada 1 segundo
  const intervaloCriar = setInterval(() => {
    if (jogoAtivo) criarLixo();
  }, 1000);

  // Mover lixo 60 vezes por segundo
  const intervaloMover = setInterval(() => {
    if (jogoAtivo) {
      moverLixo();
      checarColisoes();
    }
  }, 16);

</script>

</body>
</html>
